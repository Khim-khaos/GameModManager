# Changelog

Все значимые изменения в этом проекте будут задокументированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и этот проект придерживается [Semantic Versioning](https://semver.org/lang/ru/).

## [Не выпущено]

### Добавлено
- Интернационализация (i18n) с поддержкой многоязычного интерфейса
- Глобальный менеджер языков для централизованного управления переводами
- Поддержка иконок в интерфейсе приложения
- Быстрое добавление модов с обработкой зависимостей
- Контекстное меню для управления модами

### Изменено
- Переработана система логирования с улучшенным управлением файлами
- Улучшена обработка ошибок в Steam Workshop Service
- Реорганизованы пути конфигурации и данные приложения
- Перенесены константы в отдельные модули
- Улучшено отображение зависимостей модов в интерфейсе
- Локализация всех интерфейсных строк через систему i18n

### Исправлено
- Переключение языков без перезапуска приложения
- Ошибки в менеджере модов и мониторе процессов
- Обработка кликов по зависимостям в браузере
- Получение названий зависимостей через Steam Workshop API

---

## [0.3.0] - 2026-02-28

### Добавлено
- **Система кэширования** (CacheManager)
  - TTL-кэширование для всех запросов к Steam
  - Автоматическая очистка устаревших данных
  - Разные сроки жизни для разных типов данных:
    - Детали модов: 1 час
    - Информация об обновлениях: 30 минут
    - Результаты загрузки: 5 минут
    - Информация о процессах: 5 секунд
    - Информация об играх: 10 минут

- **Мониторинг процессов** (ProcessMonitor)
  - Реальное отслеживание запущенных процессов игр
  - Кэширование статуса на 5 секунд
  - Graceful handling при недоступности процессов

- **Мониторинг статуса** (StatusMonitor)
  - Фоновый мониторинг статуса всех игр
  - Автоматическое обновление UI при изменении статуса
  - Callback-система для уведомлений

- **Умная загрузка данных**
  - Загрузка только модов без кэша
  - Предварительная загрузка отсутствующих данных
  - Проверка модов на наличие в кэше перед запросом

### Изменено
- **SteamWorkshopService**
  - Интеграция CacheManager во все методы
  - Добавлены методы `get_cached_mods()` и `preload_missing_mods()`
  - Улучшен парсинг URL изображений модов
  - Добавлен метод `invalidate_cache()` для принудительного обновления

- **GameManager**
  - Реализована проверка запуска игр через процессы
  - Добавлены методы `update_all_games_status()` и `get_running_games()`
  - Улучшена обработка статусов игр

- **SteamHandler**
  - Кэширование результатов загрузки модов
  - Кэширование информации об играх

### Исправлено
- Ошибка определения запущенных игр
- Проблемы с отображением изображений модов
- Отображение только ID зависимостей вместо названий
- Повторная загрузка одних и тех же данных

---

## [0.2.5] - 2026-02-27

### Добавлено
- **Умное поведение кликов по зависимостям**
  - Установленные зависимости: выделение в списке (зеленая подсветка на 3 сек)
  - Неустановленные зависимости: открытие в браузере приложения
  - Информативные tooltip для каждого типа

- **Визуальные индикаторы**
  - Гиперссылки для установленных зависимостей (синий цвет)
  - Обычный текст для неустановленных (серый цвет)
  - Временная зеленая подсветка при выделении

### Изменено
- Обновлены tooltip зависимостей:
  - "Установлен - кликните для выделения в списке"
  - "Не установлен - кликните для открытия в браузере"
- Автоматическая очистка выделения через 3 секунды
- Очистка выделения при закрытии вкладки

### Исправлено
- Некорректное открытие всех зависимостей в браузере
- Отсутствие визуальной обратной связи при клике

---

## [0.2.4] - 2026-02-26

### Добавлено
- **Rate Limiting для Steam API**
  - Минимальный интервал между запросами: 1 секунда
  - Максимум попыток: 3
  - Экспоненциальная задержка при ошибках 429

- **Обработка ошибок 429 Too Many Requests**
  - Автоматические повторные попытки
  - Экспоненциальные задержки: 2^attempt + random(0,1) секунд
  - Максимальное ожидание: 60 секунд

- **Настройки потоков**
  - Уменьшено количество одновременных потоков: 5 → 2
  - Добавлены задержки между задачами: 0.5 секунды

### Изменено
- **SteamWorkshopService**
  - Добавлен метод `_wait_for_rate_limit()`
  - Добавлен метод `_make_request_with_retry()`
  - Уменьшено значение semaphore: 5 → 2

- **Логирование**
  - Добавлены логи для отладки rate limiting
  - Логирование всех попыток повторов при 429

### Исправлено
- Ошибки `429 Too Many Requests` от Steam
- Потеря данных модов при блокировках
- Медленная загрузка при множестве запросов

---

## [0.2.3] - 2026-02-25

### Добавлено
- **Сборка PyInstaller**
  - Конфигурационный файл `GameModManager.spec`
  - Скрипты сборки: `build_exe.py`, `build_with_pyinstaller.py`
  - Инструкция по сборке в `BUILD_INSTRUCTIONS.md`

- **README документация**
  - Полная документация на английском и русском языках
  - Инструкция по установке и использованию
  - Описание структуры проекта
  - Информация о зависимостях

### Изменено
- Рефакторинг структуры кода для улучшения читаемости
- Улучшена обработка зависимостей модов
- Обновлен `.gitignore` для исключения временных файлов

### Исправлено
- Проблемы с обработкой диалогов прогресса
- Ошибки в браузере при выполнении JavaScript

---

## [0.2.0] - 2026-02-20

### Добавлено
- **Многопользовательский интерфейс на wxPython**
  - Главное окно с вкладками
  - Вкладка управления модами
  - Вкладка браузера Steam Workshop
  - Вкладка логов приложения

- **Управление играми**
  - Добавление/редактирование/удаление игр
  - Валидация Steam App ID через API
  - Проверка путей к файлам игр

- **Управление модами**
  - Включение/отключение модов
  - Автоматическая архивация отключенных модов
  - Отображение зависимостей модов
  - Детали модов с изображениями

- **Интеграция Steam Workshop**
  - Просмотр модов в браузере приложения
  - Поиск и фильтрация модов
  - Установка модов напрямую из Workshop
  - Загрузка данных через Steam API

- **Менеджеры**
  - `GameManager` - управление играми
  - `ModManager` - управление модами
  - `SteamHandler` - интеграция со Steam
  - `DownloadManager` - управление загрузками
  - `SettingsManager` - настройки приложения
  - `LanguageManager` - управление языками

### Технические детали
- **Языки**: Python 3.8+
- **GUI**: wxPython
- **HTTP**: requests
- **Парсинг**: beautifulsoup4, lxml
- **Логирование**: loguru
- **Процессы**: psutil
- **БД**: sqlalchemy

---

## [0.1.0] - 2026-02-15

### Добавлено
- Начальная версия GameModManager
- Базовая структура проекта
- Основные модели данных (Game, Mod)
- Конфигурационные файлы

---

## Типы изменений

- **Added** (Добавлено) — новые функции
- **Changed** (Изменено) — изменения в существующей функциональности
- **Deprecated** (Устарело) — функции, которые будут удалены в будущем
- **Removed** (Удалено) — удаленные функции
- **Fixed** (Исправлено) — исправления ошибок
- **Security** (Безопасность) — исправления уязвимостей

---

## Планы развития

### Этап 1: Технические улучшения
- [ ] Расширенные настройки кэширования
- [ ] Улучшенная сортировка модов
- [ ] Прогресс-индикаторы для длительных операций

### Этап 2: Система обновлений
- [ ] Проверка обновлений модов
- [ ] Сравнение версий
- [ ] Массовое обновление

### Этап 3: Темы и настройки
- [ ] Dark/Light темы
- [ ] Пользовательские фоны
- [ ] Настройка шрифтов

### Этап 4: Расширение языков
- [ ] Динамическое переключение
- [ ] Новые языки (немецкий, польский, украинский)
- [ ] Автоопределение языка системы

---

## Авторы

- **Khim-khaos** - Основная разработка

## Лицензия

MIT License - см. файл [LICENSE](LICENSE)
